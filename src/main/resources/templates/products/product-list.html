<!doctype html>

<html lang="en"
      xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>Bookshop</title>
        <link rel="shortcut icon" type="image/ico" th:href="@{/favicon.ico}">
        <link rel="stylesheet"
              type="text/css"
              href="https://cdn.datatables.net/v/bs5/jq-3.6.0/dt-1.13.1/datatables.min.css"/>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css"
              rel="stylesheet"
              integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD"
              crossorigin="anonymous">
        <link rel="stylesheet" th:href="@{/styles.css}">
    </head>

    <body>
        <header>
            <div th:replace="~{fragments/navbar :: navbar}"></div>
        </header>

        <main>
            <div class="container mt-3 col-12">
                <h2>List of Products</h2>
                <hr/>
                <a th:href="@{/products/addProductForm}" class="btn btn-primary mb-2">Add Product</a>
                <table id="category-table" class="table table-bordered table-hover align-middle">
                    <thead class="table-dark">
                        <tr>
                            <th class="text-center">Id</th>
                            <th>Title</th>
                            <th>Author</th>
                            <th>Category</th>
                            <th class="text-center">Quantity</th>
                            <th class="text-center">Price</th>
                            <th class="text-center">Actions</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr th:each="productDTO: ${productsDTO}">

                            <td th:text="${productDTO.id}" class="text-center col-1"></td>
                            <td th:text="${productDTO.title}" class="col-3"></td>
                            <td th:text="${productDTO.author}" class="col-2"></td>
                            <td th:text="${productDTO.category.name}" class="col-2"></td>
                            <td th:text="${productDTO.quantity}" class="text-center col-1"></td>
                            <td th:text="${productDTO.price}" class="text-center col-1"></td>

                            <td class="text-center col-2">
                                <a th:href="@{/products/showUpdateForm(id=${productDTO.id})}"
                                   class="btn btn-info">Update</a>
                                <a th:href="@{/products/deleteProduct(id=${productDTO.id})}"
                                   class="btn btn-danger ms-2">Delete</a>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </main>

        <footer>

        </footer>

        <script src="https://kit.fontawesome.com/5f637348e4.js" crossorigin="anonymous"></script>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.1/jquery.min.js"></script>
        <script type="text/javascript"
                src="https://cdn.datatables.net/v/bs5/jq-3.6.0/dt-1.13.1/datatables.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"
                integrity="sha384-oBqDVmMz9ATKxIep9tiCxS/Z9fNfEXiDAYTujMAeBAsjFuCZSmKbSSUnQlmh/jp3"
                crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.min.js"
                integrity="sha384-mQ93GR66B00ZXjt0YO5KlohRA5SY2XofN4zfuZxLkoj1gXtW8ANNCe9d5Y3eG5eD"
                crossorigin="anonymous"></script>
        <script>
            $(document).ready(function() {
                $("#category-table").DataTable({
                    'aoColumnDefs': [{
                        'bSortable': false,
                        'aTargets': [-1]
                    }]
                });
            })
        </script>
    </body>

</html>